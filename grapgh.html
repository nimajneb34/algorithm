<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

</head>
<body>

  <font face="微軟正黑體" size="5">基本題 4-1:使用蒙地卡羅求兩圓相交之面積?</font>
  <br>
  <canvas id="monte" width="400" height="200" style="border:1px solid #000000;">
    Your browser does not support the HTML5 canvas tag.
  </canvas>
  <br>
  <input id="montecarlo1" type="button" value="montecarlo1" onclick="montecarlo(512);" />
  <input id="montecarlo2" type="button" value="montecarlo2" onclick="montecarlo(2048);" />
  <br>
  <p>圓內的點 / 全部的點 : <span id="count"></span> / <span id="total"></span></p>
  <hr>
  <font face="微軟正黑體" size="5">基本題 4-2:使用蒙地卡羅骰子連投6次，其點數和(6~36)，各點數和之機率?</font><br>
  
  <font face="微軟正黑體" size="4">(a)骰子是均勻，即點1到點6出現機率一樣?</font><br>
  <input class="btn btn-primary" type="button" value="隨機丟100組公平骰子" onclick="randomdice(100);">
  <input class="btn btn-primary" type="button" value="隨機丟100組不公平骰子" onclick="randomunequaldice(100);">
  <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#randomtablemain" aria-expanded="false" aria-controls="randomtablemain">
    展開/收起 Random Table
  </button>
  <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#randomstatmain" aria-expanded="false" aria-controls="randomstatmain">
      展開/收起 統計表
  </button>
  <div class="container">
    <div class="row">
      <div class="col">
          <div class="collapse show" id="randomtablemain">
              <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">1</th>
                      <th scope="col">2</th>
                      <th scope="col">3</th>
                      <th scope="col">4</th>
                      <th scope="col">5</th>
                      <th scope="col">6</th>
                      <th scope="col">Total</th>
                    </tr>
                  </thead>
                  <tbody id="randomtable"></tbody>
                </table>
          </div>
      </div>
      <div class="col">
        <div class="collapse show" id="randomstatmain">
            <table class="table table-bordered">
                <thead>
                  <tr>
                    <th scope="col" style="width: 25%">#</th>
                    <th scope="col" style="width: 25%">Amount</th>
                  </tr>
                </thead>
                <tbody id="randomstat"></tbody>
            </table>
        </div>
      </div>
    </div>
  </div>
  

  <script type="text/javascript">
    //蒙地卡羅算圓內點數量
	  function montecarlo(dots){
      //設定變數控制網頁中canvas項目
      const canvas = document.getElementById('monte');
      //計數器歸零
      count=0;
      if (canvas.getContext){
        const ctx = canvas.getContext('2d');
        //清空畫布
        ctx.clearRect(0,0,canvas.width,canvas.height);
        //畫圓(綠色)
        ctx.strokeStyle = 'rgb(0,255,0)';
        ctx.beginPath();
        ctx.arc(0,200,200,-90,0.5*Math.PI);
        ctx.stroke();
        //畫圓(藍色)
        ctx.strokeStyle = 'rgb(0,0,255)';
        ctx.beginPath();
        ctx.arc(200,200,200,-180,Math.PI);
        ctx.stroke();
        //產生點點，點的位置用RANDOM去抓並無條件捨去小數
        for(let i=0; i<=dots; i++){  //512,2048
        	let x =Math.floor(Math.random()*401);
          let y =Math.floor(Math.random()*201);
          //如果點的位置座標在圓以內計數器+1並用紅色畫上畫布
          if((Math.pow(x,2)+Math.pow(y-200,2)<Math.pow(200,2))&&(Math.pow(200-x,2)+Math.pow(200-y,2)<Math.pow(200,2))){
        		  count++;
      			  ctx.fillStyle = "rgb(255,0,0)";
              ctx.fillRect(x,y,1,1);
          //若非圓內則以藍色繪製
          }else{
            	  ctx.fillStyle = "rgb(0,0,255)";
                ctx.fillRect(x,y,1,1);
          }
        }
        document.getElementById("count").innerHTML=count;
        document.getElementById("total").innerHTML=dots;
      }
    }
  
    //產生隨機數字1~6
    function equaldice(){
      return 1+Math.floor(Math.random()*6);
    }

    function randomdice(time){
      var str="", stat="", dicearr=new Array(42);
      for(var i=0; i<dicearr.length; i++){
        dicearr[i]=0;
      }
      for(var i=0; i<time; i++){
        var sum=0;
        str=str+"<tr><th scope=\"row\">"+(i+1)+"</th>";
          for(var j=0; j<6; j++){
            var dice=equaldice();
            sum+=dice;
            dicearr[dice-1]+=1;
            str=str+"<td>"+dice+"</td>";
          }
        str=str+"<td>"+sum+"</td>";
        dicearr[sum-1]+=1;
        str+="</tr>";
      }
      for(var i=0; i<dicearr.length;i++){
        stat=stat+"<tr><th style=\"width: 25%\">"+(i+1)+"</th>";
        stat=stat+"<td style=\"width: 25%\">"+dicearr[i]+"</td>";
      }
      document.getElementById("randomtable").innerHTML=str;
      document.getElementById("randomstat").innerHTML=stat;
    }

    
</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
</body>
</html>
