<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
</head>
<body>

  <font face="微軟正黑體" size="5">4-1:使用蒙地卡羅求兩圓相交之面積?</font>
  <br>
  <canvas id="monte" width="400" height="200" style="border:1px solid #000000;">
    Your browser does not support the HTML5 canvas tag.
  </canvas>
  <br>
  <input id="montecarlo1" type="button" value="montecarlo1" onclick="montecarlo(512);" />
  <input id="montecarlo2" type="button" value="montecarlo2" onclick="montecarlo(2048);" />
  <br>
  <p>圓內的點 / 全部的點 : <span id="count"></span> / <span id="total"></span></p>
  <hr>
  <font face="微軟正黑體" size="5">4-2:使用蒙地卡羅骰子連投6次，其點數和(6~36)，各點數和之機率?</font><br>
  
  <font face="微軟正黑體" size="4">(a)骰子是均勻，即點1到點6出現機率一樣?</font><br>
  <font face="微軟正黑體" size="4">(b)骰子是不均勻，點1出現機率0.1，點2出現機率0.3，..(即f(1)=0.1, f(2)=0.3, f(3)=0.3, f(4)=0.1, f(5)=0.1, f(6)=0.1)</font><br>
  <font face="微軟正黑體" size="3" color="red">a, b接擲100組做測試</font><br>
  <input class="btn btn-primary" type="button" value="(a) 公平骰子" onclick="randomdice(100,true);">
  <input class="btn btn-primary" type="button" value="(b) 不公平骰子" onclick="randomdice(100,false);">
  <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#randomtablemain" aria-expanded="false" aria-controls="randomtablemain">
    展開/收起 Random Table
  </button>
  <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#randomstatmain" aria-expanded="false" aria-controls="randomstatmain">
      展開/收起 統計表
  </button>
  <div class="container">
    <div class="row">
      <div class="col">
          <div class="collapse show" id="randomtablemain">
              <table class="table table-bordered">
                  <thead>
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">1</th>
                      <th scope="col">2</th>
                      <th scope="col">3</th>
                      <th scope="col">4</th>
                      <th scope="col">5</th>
                      <th scope="col">6</th>
                      <th scope="col">Total</th>
                    </tr>
                  </thead>
                  <tbody id="randomtable"></tbody>
                </table>
          </div>
      </div>
      <div class="col">
        <div class="collapse show" id="randomstatmain">
          <canvas id="dicestat"></canvas>
          <canvas id="sumstat"></canvas>
        </div>
      </div>
    </div>
  </div>
  <br>
  <font face="微軟正黑體" size="5">4-3:蒙地卡羅積分求  ∫(1~0) 𝒙̃^𝟐 𝒅𝒙̃ ,𝒙̃ 假設如下:</font><br>
  <font face="微軟正黑體" size="4">(a) 𝒙̃ 為連續隨機均勻在[0,1]間，積分區間在[0,1]間</font>
  <input class="btn btn-primary" type="button" value="Test" onclick="montecarloIn1(0,1,1000000,0,1);"><br>
  <font face="微軟正黑體" size="4">(b) 𝒙̃ 為連續隨機均勻在[0,2]間，積分區間在[0,1]間</font>
  <input class="btn btn-primary" type="button" value="Test" onclick="montecarloIn1(0,1,1000000,0,2);"><br>
  <font face="微軟正黑體" size="4">(c) 𝒙̃ 為隨機常態分佈(平均值為1, 標準差為2) ，積分區間在[0,1]間</font>
  <input class="btn btn-primary" type="button" value="Test" onclick="montecarloIn2(0,1,1000000);"><br>
  <font face="微軟正黑體" size="4">sum / total = <span id="montecarloIn"></span></font><br>
  <hr>
  <font face="微軟正黑體" size="5">進階部份實作要求</font><br>
  <font face="微軟正黑體" size="4">實作Prim 演算法:使用課本例子由 V5起</font>
  <input class="btn btn-primary" type="button" value="產生最小生成樹" onclick="montecarloIn2(0,1,1000000);"><br>
  <font face="微軟正黑體" size="4">下為課本圖形轉變之相鄰矩陣</font><br>
  <div class="container">
    <div class="row">
      <div class="col">
              <table class="table table-bordered" style="width: 50%;">
                <thead>
                  <tr>
                    <th scope="col">\</th><th scope="col">1</th><th scope="col">2</th><th scope="col">3</th><th scope="col">4</th><th scope="col">5</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="col">1</th><td>0</td><td>1</td><td>3</td><td>Inf</td><td>Inf</td>
                  </tr>
                  <tr>
                    <th scope="col">2</th><td>1</td><td>0</td><td>3</td><td>6</td><td>Inf</td>
                  </tr>
                  <tr>
                    <th scope="col">3</th><td>3</td><td>3</td><td>0</td><td>4</td><td>2</td>
                  </tr>
                  <tr>
                    <th scope="col">4</th><td>Inf</td><td>6</td><td>4</td><td>0</td><td>5</td>
                  </tr>
                  <tr>
                    <th scope="col">5</th><td>Inf</td><td>Inf</td><td>2</td><td>5</td><td>0</td>
                  </tr>
                </tbody>
              </table>
      </div>
    </div>
  </div>
  
  
  

  <script type="text/javascript">
    //蒙地卡羅算圓內點數量
	  function montecarlo(dots){
      //設定變數控制網頁中canvas項目
      const canvas = document.getElementById('monte');
      //計數器歸零
      count=0;
      if (canvas.getContext){
        const ctx = canvas.getContext('2d');
        //清空畫布
        ctx.clearRect(0,0,canvas.width,canvas.height);
        //畫圓(綠色)
        ctx.strokeStyle = 'rgb(0,255,0)';
        ctx.beginPath();
        ctx.arc(0,200,200,-90,0.5*Math.PI);
        ctx.stroke();
        //畫圓(藍色)
        ctx.strokeStyle = 'rgb(0,0,255)';
        ctx.beginPath();
        ctx.arc(200,200,200,-180,Math.PI);
        ctx.stroke();
        //產生點點，點的位置用RANDOM去抓並無條件捨去小數
        for(let i=0; i<=dots; i++){  //512,2048
        	let x =Math.floor(Math.random()*401);
          let y =Math.floor(Math.random()*201);
          //如果點的位置座標在圓以內計數器+1並用紅色畫上畫布
          if((Math.pow(x,2)+Math.pow(y-200,2)<Math.pow(200,2))&&(Math.pow(200-x,2)+Math.pow(200-y,2)<Math.pow(200,2))){
        		  count++;
      			  ctx.fillStyle = "rgb(255,0,0)";
              ctx.fillRect(x,y,1,1);
          //若非圓內則以藍色繪製
          }else{
            	  ctx.fillStyle = "rgb(0,0,255)";
                ctx.fillRect(x,y,1,1);
          }
        }
        document.getElementById("count").innerHTML=count;
        document.getElementById("total").innerHTML=dots;
      }
    }
  
    //產生隨機數字1~6
    function equaldice(){
      return 1+Math.floor(Math.random()*6);
    }

    //在頁面顯示丟不隨機骰子(反隨機轉換法參數已設定好)
    function unequaldice(){
      var ratio=[0.1,0.3,0.3,0.1,0.1,0.1];
      var random=Math.random();
      for(var i=0,max=0; i<ratio.length;i++){
        max+=ratio[i];
        if(random<=max){
          return i+1;
        }
      }
    }

    //在頁面顯示丟(time)次骰子的結果(israndom判斷是否為公平骰子)
    function randomdice(time,israndom){
      var str="", stat="", dicearr=new Array(6), sumarr=new Array(31);
      removecanvas(randomstatmain)
      var dicestat = document.getElementById('dicestat').getContext('2d');
      var sumstat = document.getElementById('sumstat').getContext('2d');
      for(var i=0; i<dicearr.length; i++){
        dicearr[i]=0;
      }
      for(var i=0; i<sumarr.length; i++){
        sumarr[i]=0;
      }
      for(var i=0; i<time; i++){
        var sum=0;
        str=str+"<tr><th scope=\"row\">"+(i+1)+"</th>";
          for(var j=0; j<6; j++){
            var dice;
            if(israndom){
              dice=equaldice();
            }else{
              dice=unequaldice();
            }
            sum+=dice;
            dicearr[dice-1]+=1;
            str=str+"<td>"+dice+"</td>";
          }
        str=str+"<td>"+sum+"</td>";
        sumarr[sum-6]+=1;
        str+="</tr>";
      }
      var dicechart = new Chart(dicestat,{
        type:'bar',
        data:{
          labels:[1,2,3,4,5,6],
          datasets:[{
            label:"Dice Stat",
            backgroundColor: getRandomColorArray(),
            borderColor: getRandomColorArray(),
            borderWidth: 1,
            data: dicearr
          }]
        },
        options: {
          scales: {
            yAxes: [{
                ticks: {
                    beginAtZero:true
                }
            }]
          }
        }
      });

      var sumchart = new Chart(sumstat,{
        type: 'bar',
        data:{
          labels:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36],
          datasets:[{
            label:"Sum Stat",
            backgroundColor: getRandomColorArray(),
            borderColor: getRandomColorArray(),
            data: sumarr
          }]
        }
      });
      document.getElementById("randomtable").innerHTML=str;
    }

    function montecarloIn1(a, b, total, min, max){
      var sum=0;
      for(var i=0; i<total; i++){
        var random=Math.random()*max+min;
        if(a<=random&&random<=b){
          sum+=f(random);
        }
      }
      sum = sum * (b-a);
      document.getElementById("montecarloIn").innerHTML=sum/total;
    }

    function montecarloIn2(a, b, total, min, max){
      var sum=0;
      for(var i=0; i<total; i++){
        var random = d3.randomNormal(1, 2.0)();
        if(a<=random&&random<=b){
          sum+=f(random);
        }
      }
      sum = sum * (b-a);
      document.getElementById("montecarloIn").innerHTML=sum;
    }

    function Prim(n, arrW, start){
      var F=[], arrDistance=[], arrNear=[];
      var arrDistance=arrW[start-1];
      for(var i=0; i<n; i++){

      }
    }

    function testPrim(){
      var arrW=[
        [0,1,3,Infinity,Infinity],
        [1,0,3,6,Infinity],
        [3,3,0,4,2],
        [Infinity,6,4,0,5],
        [Infinity,Infinity,2,5,0]
      ]
      Prim(5,arrW,5);
    }

    function f(x){
      return Math.pow(x,2);
    }

    function removecanvas(){
      var oldcanv = document.getElementById("randomstatmain");
      var olddicestat=document.getElementById("dicestat");
      var oldsumstat=document.getElementById("sumstat");
      var dicestat=document.createElement('canvas');
      dicestat.id="dicestat";
      var sumstat = document.createElement('canvas');
      sumstat.id="sumstat";
      oldcanv.replaceChild(dicestat,olddicestat);
      oldcanv.replaceChild(sumstat,oldsumstat);

    }

    function getRandomColorArray() {
      var letters = '0123456789abcdef'.split('');
      var color="#";
      for (var i = 0; i < 6; i++ ) {
          color += letters[Math.floor(Math.random() * 16)];
      }
      return color;
    }

</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<script src="https://d3js.org/d3-random.v1.min.js"></script>
</body>
</html>
